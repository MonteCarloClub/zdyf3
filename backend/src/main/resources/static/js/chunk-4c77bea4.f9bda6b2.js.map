{"version":3,"sources":["webpack:///./src/views/certificates/_List.vue?81b2","webpack:///./src/api/certificates.js","webpack:///src/views/certificates/_List.vue","webpack:///./src/views/certificates/_List.vue?e139","webpack:///./src/views/certificates/_List.vue","webpack:///./src/views/certificates/_List.vue?32ac","webpack:///./node_modules/.pnpm/registry.npmmirror.com+core-js@3.20.2/node_modules/core-js/modules/es.array.splice.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","model","value","callback","$$v","searchInput","expression","on","searchCert","_v","$event","applyFormVisible","certificates","emptyText","scopedSlots","_u","key","fn","scope","revoke","detailInfo","row","detailVisible","_s","detail","version","ABSUID","serialNumber","ABSAttribute","issuer","signatureName","validityPeriod","slot","ref","applyRules","applyCert","$set","applyRes","_e","applyForCert","staticRenderFns","CERT_HOST","certService","axios","create","baseURL","interceptors","request","use","config","headers","crossdomain","error","console","log","Promise","reject","certApi","list","resolve","url","method","then","response","status","data","catch","no","params","certInfo","uid","apply","attribute","name","components","mounted","methods","cert","$refs","applyForm","validate","valid","a","component","$","global","toAbsoluteIndex","toIntegerOrInfinity","lengthOfArrayLike","toObject","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","TypeError","max","Math","min","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","target","proto","forced","splice","start","deleteCount","insertCount","actualDeleteCount","A","k","from","to","O","len","actualStart","argumentsLength","arguments","length"],"mappings":"gJAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,WAAW,CAACG,MAAM,CAAC,YAAc,QAAQC,MAAM,CAACC,MAAOT,EAAe,YAAEU,SAAS,SAAUC,GAAMX,EAAIY,YAAYD,GAAKE,WAAW,kBAAkB,GAAGT,EAAG,MAAM,CAACA,EAAG,YAAY,CAACU,GAAG,CAAC,MAAQd,EAAIe,aAAa,CAACf,EAAIgB,GAAG,YAAYZ,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWO,GAAG,CAAC,MAAQ,SAASG,GAAQjB,EAAIkB,kBAAmB,KAAQ,CAAClB,EAAIgB,GAAG,aAAa,KAAKZ,EAAG,WAAW,CAACG,MAAM,CAAC,KAAOP,EAAImB,aAAa,aAAanB,EAAIoB,YAAY,CAAChB,EAAG,kBAAkB,CAACG,MAAM,CAAC,wBAAwB,GAAG,MAAQ,OAAO,KAAO,YAAYH,EAAG,kBAAkB,CAACG,MAAM,CAAC,wBAAwB,GAAG,MAAQ,OAAO,KAAO,kBAAkBH,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,KAAK,MAAQ,SAASc,YAAYrB,EAAIsB,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAACrB,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,OAAO,KAAO,UAAU,MAAQ,IAAIO,GAAG,CAAC,MAAQ,SAASG,GAAQ,OAAOjB,EAAI0B,OAAOD,MAAU,CAACzB,EAAIgB,GAAG,YAAYZ,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,OAAO,KAAO,QAAQO,GAAG,CAAC,MAAQ,SAASG,GAAQ,OAAOjB,EAAI2B,WAAWF,EAAMG,QAAQ,CAAC5B,EAAIgB,GAAG,oBAAoB,GAAGZ,EAAG,YAAY,CAACG,MAAM,CAAC,MAAQ,OAAO,QAAUP,EAAI6B,eAAef,GAAG,CAAC,iBAAiB,SAASG,GAAQjB,EAAI6B,cAAcZ,KAAU,CAACb,EAAG,kBAAkB,CAACG,MAAM,CAAC,OAAS,IAAI,CAACH,EAAG,uBAAuB,CAACG,MAAM,CAAC,MAAQ,OAAO,CAACP,EAAIgB,GAAGhB,EAAI8B,GAAG9B,EAAI+B,OAAOC,YAAY5B,EAAG,uBAAuB,CAACG,MAAM,CAAC,MAAQ,OAAO,CAACP,EAAIgB,GAAGhB,EAAI8B,GAAG9B,EAAI+B,OAAOE,QAAQ,OAAO7B,EAAG,uBAAuB,CAACG,MAAM,CAAC,MAAQ,SAAS,CAACP,EAAIgB,GAAG,IAAIhB,EAAI8B,GAAG9B,EAAI+B,OAAOG,cAAc,OAAO9B,EAAG,uBAAuB,CAACG,MAAM,CAAC,MAAQ,OAAO,CAACP,EAAIgB,GAAG,IAAIhB,EAAI8B,GAAG9B,EAAI+B,OAAOI,cAAc,OAAO/B,EAAG,uBAAuB,CAACG,MAAM,CAAC,MAAQ,QAAQ,CAACP,EAAIgB,GAAGhB,EAAI8B,GAAG9B,EAAI+B,OAAOK,WAAWhC,EAAG,uBAAuB,CAACG,MAAM,CAAC,MAAQ,OAAO,CAACP,EAAIgB,GAAGhB,EAAI8B,GAAG9B,EAAI+B,OAAOM,kBAAkBjC,EAAG,uBAAuB,CAACG,MAAM,CAAC,MAAQ,QAAQ,CAACP,EAAIgB,GAAGhB,EAAI8B,GAAG9B,EAAI+B,OAAOO,oBAAoB,GAAGlC,EAAG,MAAM,CAACG,MAAM,CAAC,KAAO,UAAUgC,KAAK,UAAU,CAACnC,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWO,GAAG,CAAC,MAAQ,SAASG,GAAQjB,EAAI6B,eAAgB,KAAS,CAAC7B,EAAIgB,GAAG,UAAU,IAAI,GAAGZ,EAAG,YAAY,CAACG,MAAM,CAAC,MAAQ,OAAO,QAAUP,EAAIkB,kBAAkBJ,GAAG,CAAC,iBAAiB,SAASG,GAAQjB,EAAIkB,iBAAiBD,KAAU,CAACb,EAAG,UAAU,CAACoC,IAAI,YAAYjC,MAAM,CAAC,MAAQP,EAAIyC,WAAW,MAAQzC,EAAI0C,UAAU,cAAc,SAAS,CAACtC,EAAG,eAAe,CAACG,MAAM,CAAC,KAAO,MAAM,MAAQ,QAAQ,CAACH,EAAG,WAAW,CAACI,MAAM,CAACC,MAAOT,EAAI0C,UAAa,IAAEhC,SAAS,SAAUC,GAAMX,EAAI2C,KAAK3C,EAAI0C,UAAW,MAAO/B,IAAME,WAAW,oBAAoB,GAAGT,EAAG,eAAe,CAACG,MAAM,CAAC,KAAO,YAAY,MAAQ,OAAO,CAACH,EAAG,WAAW,CAACI,MAAM,CAACC,MAAOT,EAAI0C,UAAmB,UAAEhC,SAAS,SAAUC,GAAMX,EAAI2C,KAAK3C,EAAI0C,UAAW,YAAa/B,IAAME,WAAW,0BAA0B,GAAIb,EAAY,SAAEI,EAAG,MAAM,CAACA,EAAG,eAAe,CAACG,MAAM,CAAC,KAAO,OAAO,MAAQ,OAAO,CAACP,EAAIgB,GAAGhB,EAAI8B,GAAG9B,EAAI4C,SAASZ,YAAY5B,EAAG,eAAe,CAACG,MAAM,CAAC,KAAO,OAAO,MAAQ,OAAO,CAACP,EAAIgB,GAAGhB,EAAI8B,GAAG9B,EAAI4C,SAASX,QAAQ,OAAO7B,EAAG,eAAe,CAACG,MAAM,CAAC,KAAO,OAAO,MAAQ,SAAS,CAACP,EAAIgB,GAAG,IAAIhB,EAAI8B,GAAG9B,EAAI4C,SAASV,cAAc,OAAO9B,EAAG,eAAe,CAACG,MAAM,CAAC,KAAO,OAAO,MAAQ,OAAO,CAACP,EAAIgB,GAAG,IAAIhB,EAAI8B,GAAG9B,EAAI4C,SAAST,cAAc,OAAO/B,EAAG,eAAe,CAACG,MAAM,CAAC,KAAO,OAAO,MAAQ,QAAQ,CAACP,EAAIgB,GAAGhB,EAAI8B,GAAG9B,EAAI4C,SAASR,WAAWhC,EAAG,eAAe,CAACG,MAAM,CAAC,KAAO,OAAO,MAAQ,OAAO,CAACP,EAAIgB,GAAGhB,EAAI8B,GAAG9B,EAAI4C,SAASP,kBAAkBjC,EAAG,eAAe,CAACG,MAAM,CAAC,KAAO,OAAO,MAAQ,QAAQ,CAACP,EAAIgB,GAAGhB,EAAI8B,GAAG9B,EAAI4C,SAASN,oBAAoB,GAAGtC,EAAI6C,MAAM,GAAGzC,EAAG,MAAM,CAACG,MAAM,CAAC,KAAO,UAAUgC,KAAK,UAAU,CAACnC,EAAG,YAAY,CAACU,GAAG,CAAC,MAAQ,SAASG,GAAQjB,EAAIkB,kBAAmB,KAAS,CAAClB,EAAIgB,GAAG,SAASZ,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWO,GAAG,CAAC,MAAQd,EAAI8C,eAAe,CAAC9C,EAAIgB,GAAG,UAAU,IAAI,IAAI,IACpzH+B,EAAkB,G,qDCChBC,EAAY,SACZC,EAAcC,IAAMC,OAAO,CAC7BC,QAA4DJ,IAIhEC,EAAYI,aAAaC,QAAQC,KAC7B,SAAAC,GAKI,OAJAA,EAAOC,QAAQ,+BAAiC,IAChDD,EAAOC,QAAQ,gCAAkC,yCACjDD,EAAOC,QAAQ,gCAAkC,qCACjDD,EAAOE,aAAc,EACdF,KAEX,SAAAG,GAGI,OADAC,QAAQC,IAAI,kBAAmBF,GACxBG,QAAQC,OAAOJ,MAIvB,IAAMK,EAAU,CAMnBC,KAAM,WACF,OAAO,IAAIH,SAAQ,SAACI,EAASH,GACzBd,EAAYK,QAAQ,CAChBa,IAAK,cACLC,OAAQ,QACTC,MAAK,SAAAC,GACoB,MAApBA,EAASC,OACTL,EAAQI,EAASE,MAGjBT,EAAOO,MAEZG,MAAMV,OASjBrC,OAAQ,YAAkB,IAANgD,EAAM,EAANA,GAChB,OAAO,IAAIZ,SAAQ,SAACI,EAASH,GACzBd,EAAYK,QAAQ,CAChBa,IAAK,wBACLC,OAAQ,MACRO,OAAQ,CAAED,QACXL,MAAK,SAAAC,GACoB,MAApBA,EAASC,OACTL,EAAQI,EAASE,MAGjBT,EAAOO,MAEZG,MAAMV,OASjBa,SAAU,SAAUC,GAChB,OAAO,IAAIf,SAAQ,SAACI,EAASH,GACzBd,EAAYK,QAAQ,CAChBa,IAAK,uBACLC,OAAQ,MACRO,OAAQ,CAACE,SACVR,MAAK,SAAAC,GACoB,MAApBA,EAASC,OACTL,EAAQI,EAASE,MAGjBT,EAAOO,MAEZG,MAAMV,OASjBe,MAAO,SAAUD,EAAKE,GAClB,OAAO,IAAIjB,SAAQ,SAACI,EAASH,GACzBd,EAAYK,QAAQ,CAChBa,IAAK,0BACLC,OAAQ,MACRO,OAAQ,CAACE,MAAKE,eACfV,MAAK,SAAAC,GACoB,MAApBA,EAASC,OACTL,EAAQI,EAASE,MAGjBT,EAAOO,MAEZG,MAAMV,QCtCrB,GACEiB,KAAM,OACNC,WAAY,GACZT,KAHF,WAII,MAAO,CACLrD,aAAc,GACdC,UAAW,OACXS,eAAe,EACfE,OAAQ,GAERb,kBAAkB,EAClBwB,UAAW,GAEXD,WAAY,CACVoC,IAAK,CAAC,CAAd,gDACQE,UAAW,CAAC,CAApB,+CAGMnE,YAAa,GACbgC,UAAU,IAIdsC,QAvBF,WAuBA,WACIjF,KAAKmB,UAAY,UACjB4C,EACJ,OACA,kBACM,EAAN,gCAGQ,OAFA,EAAR,cACQ,EAAR,2CACA,iBAEM,EAAN,oBAEA,oBAGEmB,QAAS,CACPxD,WADJ,SACA,GACM1B,KAAK4B,eAAgB,EACrB5B,KAAK8B,OAASqD,GAGhB1D,OANJ,SAMA,cACA,qBACMsC,EACN,QAAQ,GAAR,IACA,kBACA,WACU,EAAV,UACY,QAAZ,OACY,SAAZ,IACY,KAAZ,YAEU,EAAV,iCAEU,EAAV,UACY,QAAZ,EACY,KAAZ,aAIA,mBACQ,EAAR,UACU,QAAV,UACU,KAAV,cAKIlB,aAjCJ,WAiCA,WACM7C,KAAKoF,MAAMC,UAAUC,UAAS,SAApC,GACQ,GAAKC,EAAL,CACA,IAAR,oCACQ,EAAR,YAEQxB,EACR,WACA,kBACU,EAAV,2CACU,EAAV,uBACU,EAAV,UACY,QAAZ,OACY,SAAZ,IACY,KAAZ,eAGA,mBACU,EAAV,UACY,QAAZ,UACY,KAAZ,kBAMIjD,WA3DJ,WA2DA,WACA,mBACU0E,GACFzB,EACR,YACA,kBACU,EAAV,2CACU,EAAV,gCAEA,mBACU,EAAV,UACY,QAAZ,UACY,KAAZ,gBClL8uB,I,wBCQ1uB0B,EAAY,eACd,EACA3F,EACAgD,GACA,EACA,KACA,WACA,MAIa,aAAA2C,E,2CCnBf,W,kCCCA,IAAIC,EAAI,EAAQ,QACZC,EAAS,EAAQ,QACjBC,EAAkB,EAAQ,QAC1BC,EAAsB,EAAQ,QAC9BC,EAAoB,EAAQ,QAC5BC,EAAW,EAAQ,QACnBC,EAAqB,EAAQ,QAC7BC,EAAiB,EAAQ,QACzBC,EAA+B,EAAQ,QAEvCC,EAAsBD,EAA6B,UAEnDE,EAAYT,EAAOS,UACnBC,EAAMC,KAAKD,IACXE,EAAMD,KAAKC,IACXC,EAAmB,iBACnBC,EAAkC,kCAKtCf,EAAE,CAAEgB,OAAQ,QAASC,OAAO,EAAMC,QAAST,GAAuB,CAChEU,OAAQ,SAAgBC,EAAOC,GAC7B,IAIIC,EAAaC,EAAmBC,EAAGC,EAAGC,EAAMC,EAJ5CC,EAAIvB,EAAS/F,MACbuH,EAAMzB,EAAkBwB,GACxBE,EAAc5B,EAAgBkB,EAAOS,GACrCE,EAAkBC,UAAUC,OAWhC,GATwB,IAApBF,EACFT,EAAcC,EAAoB,EACL,IAApBQ,GACTT,EAAc,EACdC,EAAoBM,EAAMC,IAE1BR,EAAcS,EAAkB,EAChCR,EAAoBV,EAAIF,EAAIR,EAAoBkB,GAAc,GAAIQ,EAAMC,IAEtED,EAAMP,EAAcC,EAAoBT,EAC1C,MAAMJ,EAAUK,GAGlB,IADAS,EAAIlB,EAAmBsB,EAAGL,GACrBE,EAAI,EAAGA,EAAIF,EAAmBE,IACjCC,EAAOI,EAAcL,EACjBC,KAAQE,GAAGrB,EAAeiB,EAAGC,EAAGG,EAAEF,IAGxC,GADAF,EAAES,OAASV,EACPD,EAAcC,EAAmB,CACnC,IAAKE,EAAIK,EAAaL,EAAII,EAAMN,EAAmBE,IACjDC,EAAOD,EAAIF,EACXI,EAAKF,EAAIH,EACLI,KAAQE,EAAGA,EAAED,GAAMC,EAAEF,UACbE,EAAED,GAEhB,IAAKF,EAAII,EAAKJ,EAAII,EAAMN,EAAoBD,EAAaG,WAAYG,EAAEH,EAAI,QACtE,GAAIH,EAAcC,EACvB,IAAKE,EAAII,EAAMN,EAAmBE,EAAIK,EAAaL,IACjDC,EAAOD,EAAIF,EAAoB,EAC/BI,EAAKF,EAAIH,EAAc,EACnBI,KAAQE,EAAGA,EAAED,GAAMC,EAAEF,UACbE,EAAED,GAGlB,IAAKF,EAAI,EAAGA,EAAIH,EAAaG,IAC3BG,EAAEH,EAAIK,GAAeE,UAAUP,EAAI,GAGrC,OADAG,EAAEK,OAASJ,EAAMN,EAAoBD,EAC9BE","file":"js/chunk-4c77bea4.f9bda6b2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"wer\"},[_c('div',{staticClass:\"wer-left\"},[_c('el-input',{attrs:{\"placeholder\":\"设备名称\"},model:{value:(_vm.searchInput),callback:function ($$v) {_vm.searchInput=$$v},expression:\"searchInput\"}})],1),_c('div',[_c('el-button',{on:{\"click\":_vm.searchCert}},[_vm._v(\" 查询证书 \")]),_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":function($event){_vm.applyFormVisible = true}}},[_vm._v(\" 证书申请 \")])],1)]),_c('el-table',{attrs:{\"data\":_vm.certificates,\"empty-text\":_vm.emptyText}},[_c('el-table-column',{attrs:{\"show-overflow-tooltip\":\"\",\"label\":\"设备名称\",\"prop\":\"ABSUID\"}}),_c('el-table-column',{attrs:{\"show-overflow-tooltip\":\"\",\"label\":\"证书序号\",\"prop\":\"serialNumber\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"warning\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.revoke(scope)}}},[_vm._v(\" 撤销证书 \")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"info\"},on:{\"click\":function($event){return _vm.detailInfo(scope.row)}}},[_vm._v(\" 详细信息 \")])]}}])})],1),_c('el-dialog',{attrs:{\"title\":\"详细信息\",\"visible\":_vm.detailVisible},on:{\"update:visible\":function($event){_vm.detailVisible=$event}}},[_c('el-descriptions',{attrs:{\"column\":1}},[_c('el-descriptions-item',{attrs:{\"label\":\"版本\"}},[_vm._v(_vm._s(_vm.detail.version))]),_c('el-descriptions-item',{attrs:{\"label\":\"设备\"}},[_vm._v(_vm._s(_vm.detail.ABSUID)+\" \")]),_c('el-descriptions-item',{attrs:{\"label\":\"证书序号\"}},[_vm._v(\" \"+_vm._s(_vm.detail.serialNumber)+\" \")]),_c('el-descriptions-item',{attrs:{\"label\":\"标签\"}},[_vm._v(\" \"+_vm._s(_vm.detail.ABSAttribute)+\" \")]),_c('el-descriptions-item',{attrs:{\"label\":\"签名人\"}},[_vm._v(_vm._s(_vm.detail.issuer))]),_c('el-descriptions-item',{attrs:{\"label\":\"签名\"}},[_vm._v(_vm._s(_vm.detail.signatureName))]),_c('el-descriptions-item',{attrs:{\"label\":\"优先级\"}},[_vm._v(_vm._s(_vm.detail.validityPeriod))])],1),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.detailVisible = false}}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"证书申请\",\"visible\":_vm.applyFormVisible},on:{\"update:visible\":function($event){_vm.applyFormVisible=$event}}},[_c('el-form',{ref:\"applyForm\",attrs:{\"rules\":_vm.applyRules,\"model\":_vm.applyCert,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"prop\":\"uid\",\"label\":\"UID\"}},[_c('el-input',{model:{value:(_vm.applyCert.uid),callback:function ($$v) {_vm.$set(_vm.applyCert, \"uid\", $$v)},expression:\"applyCert.uid\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"attribute\",\"label\":\"标签\"}},[_c('el-input',{model:{value:(_vm.applyCert.attribute),callback:function ($$v) {_vm.$set(_vm.applyCert, \"attribute\", $$v)},expression:\"applyCert.attribute\"}})],1),(_vm.applyRes)?_c('div',[_c('el-form-item',{attrs:{\"size\":\"mini\",\"label\":\"版本\"}},[_vm._v(_vm._s(_vm.applyRes.version))]),_c('el-form-item',{attrs:{\"size\":\"mini\",\"label\":\"设备\"}},[_vm._v(_vm._s(_vm.applyRes.ABSUID)+\" \")]),_c('el-form-item',{attrs:{\"size\":\"mini\",\"label\":\"证书序号\"}},[_vm._v(\" \"+_vm._s(_vm.applyRes.serialNumber)+\" \")]),_c('el-form-item',{attrs:{\"size\":\"mini\",\"label\":\"标签\"}},[_vm._v(\" \"+_vm._s(_vm.applyRes.ABSAttribute)+\" \")]),_c('el-form-item',{attrs:{\"size\":\"mini\",\"label\":\"签名人\"}},[_vm._v(_vm._s(_vm.applyRes.issuer))]),_c('el-form-item',{attrs:{\"size\":\"mini\",\"label\":\"签名\"}},[_vm._v(_vm._s(_vm.applyRes.signatureName))]),_c('el-form-item',{attrs:{\"size\":\"mini\",\"label\":\"优先级\"}},[_vm._v(_vm._s(_vm.applyRes.validityPeriod))])],1):_vm._e()],1),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.applyFormVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.applyForCert}},[_vm._v(\"申 请\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from 'axios'\r\n\r\nconst CERT_HOST = \"/dpki/\"\r\nconst certService = axios.create({\r\n    baseURL: process.env.NODE_ENV === \"development\" ? '/cert' : CERT_HOST,\r\n})\r\n\r\n// request interceptor\r\ncertService.interceptors.request.use(\r\n    config => {\r\n        config.headers['Access-Control-Allow-Origin'] = \"*\"\r\n        config.headers['Access-Control-Allow-Methods'] = \"GET, POST, PATCH, PUT, DELETE, OPTIONS\"\r\n        config.headers['Access-Control-Allow-Headers'] = \"Origin, Content-Type, X-Auth-Token\"\r\n        config.crossdomain = true\r\n        return config\r\n    },\r\n    error => {\r\n        // do something with request error\r\n        console.log('[request error]', error)\r\n        return Promise.reject(error)\r\n    }\r\n)\r\n\r\nexport const certApi = {\r\n    /**\r\n     * 获取证书列表\r\n     * @param {*} _data \r\n     * @returns Promise\r\n     */\r\n    list: function () {\r\n        return new Promise((resolve, reject) => {\r\n            certService.request({\r\n                url: '/IoTDevTest',\r\n                method: 'get',\r\n            }).then(response => {\r\n                if (response.status === 200) {\r\n                    resolve(response.data)\r\n                }\r\n                else {\r\n                    reject(response)\r\n                }\r\n            }).catch(reject)\r\n        })\r\n    },\r\n\r\n    /**\r\n     * 撤销证书\r\n     * @param {*} _data \r\n     * @returns Promise\r\n     */\r\n    revoke: function ({ no }) {\r\n        return new Promise((resolve, reject) => {\r\n            certService.request({\r\n                url: '/RevokeABSCertificate',\r\n                method: 'get',\r\n                params: { no }\r\n            }).then(response => {\r\n                if (response.status === 200) {\r\n                    resolve(response.data)\r\n                }\r\n                else {\r\n                    reject(response)\r\n                }\r\n            }).catch(reject)\r\n        })\r\n    },\r\n\r\n    /**\r\n     * 查询证书详细信息\r\n     * @param {*} _data \r\n     * @returns Promise\r\n     */\r\n    certInfo: function (uid) {\r\n        return new Promise((resolve, reject) => {\r\n            certService.request({\r\n                url: '/GetCertificateByUID',\r\n                method: 'get',\r\n                params: {uid}\r\n            }).then(response => {\r\n                if (response.status === 200) {\r\n                    resolve(response.data)\r\n                }\r\n                else {\r\n                    reject(response)\r\n                }\r\n            }).catch(reject)\r\n        })\r\n    },\r\n\r\n    /**\r\n     * 申请证书\r\n     * @param {*} _data \r\n     * @returns Promise\r\n     */\r\n    apply: function (uid, attribute) {\r\n        return new Promise((resolve, reject) => {\r\n            certService.request({\r\n                url: '/ApplyForABSCertificate',\r\n                method: 'get',\r\n                params: {uid, attribute}\r\n            }).then(response => {\r\n                if (response.status === 200) {\r\n                    resolve(response.data)\r\n                }\r\n                else {\r\n                    reject(response)\r\n                }\r\n            }).catch(reject)\r\n        })\r\n    }\r\n}","<template>\r\n  <div class=\"content\">\r\n    <div class=\"wer\">\r\n      <div class=\"wer-left\">\r\n        <el-input placeholder=\"设备名称\" v-model=\"searchInput\" />\r\n      </div>\r\n      <div>\r\n        <el-button @click=\"searchCert\"> 查询证书 </el-button>\r\n        <el-button type=\"success\" @click=\"applyFormVisible = true\"> 证书申请 </el-button>\r\n      </div>\r\n    </div>\r\n\r\n    <el-table :data=\"certificates\" :empty-text=\"emptyText\">\r\n      <el-table-column show-overflow-tooltip label=\"设备名称\" prop=\"ABSUID\" />\r\n      <el-table-column show-overflow-tooltip label=\"证书序号\" prop=\"serialNumber\" />\r\n      <el-table-column label=\"操作\" align=\"right\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"mini\" type=\"warning\" @click=\"revoke(scope)\" plain> 撤销证书 </el-button>\r\n          <el-button size=\"mini\" type=\"info\" @click=\"detailInfo(scope.row)\"> 详细信息 </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <el-dialog title=\"详细信息\" :visible.sync=\"detailVisible\">\r\n      <el-descriptions :column=\"1\">\r\n        <el-descriptions-item label=\"版本\">{{ detail.version }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"设备\">{{ detail.ABSUID }} </el-descriptions-item>\r\n        <el-descriptions-item label=\"证书序号\"> {{ detail.serialNumber }} </el-descriptions-item>\r\n        <el-descriptions-item label=\"标签\"> {{ detail.ABSAttribute }} </el-descriptions-item>\r\n        <el-descriptions-item label=\"签名人\">{{ detail.issuer }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"签名\">{{ detail.signatureName }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"优先级\">{{ detail.validityPeriod }}</el-descriptions-item>\r\n      </el-descriptions>\r\n\r\n      <div slot=\"footer\">\r\n        <el-button type=\"primary\" @click=\"detailVisible = false\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <el-dialog title=\"证书申请\" :visible.sync=\"applyFormVisible\">\r\n      <el-form ref=\"applyForm\" :rules=\"applyRules\" :model=\"applyCert\" label-width=\"80px\">\r\n        <el-form-item prop=\"uid\" label=\"UID\">\r\n          <el-input v-model=\"applyCert.uid\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"attribute\" label=\"标签\">\r\n          <el-input v-model=\"applyCert.attribute\"></el-input>\r\n        </el-form-item>\r\n        <div v-if=\"applyRes\">\r\n          <el-form-item size=\"mini\" label=\"版本\">{{ applyRes.version }}</el-form-item>\r\n          <el-form-item size=\"mini\" label=\"设备\">{{ applyRes.ABSUID }} </el-form-item>\r\n          <el-form-item size=\"mini\" label=\"证书序号\"> {{ applyRes.serialNumber }} </el-form-item>\r\n          <el-form-item size=\"mini\" label=\"标签\"> {{ applyRes.ABSAttribute }} </el-form-item>\r\n          <el-form-item size=\"mini\" label=\"签名人\">{{ applyRes.issuer }}</el-form-item>\r\n          <el-form-item size=\"mini\" label=\"签名\">{{ applyRes.signatureName }}</el-form-item>\r\n          <el-form-item size=\"mini\" label=\"优先级\">{{ applyRes.validityPeriod }}</el-form-item>\r\n        </div>\r\n      </el-form>\r\n\r\n      <div slot=\"footer\">\r\n        <el-button @click=\"applyFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"applyForCert\">申 请</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { certApi } from \"@/api/certificates\";\r\n\r\nexport default {\r\n  name: \"List\",\r\n  components: {},\r\n  data() {\r\n    return {\r\n      certificates: [],\r\n      emptyText: \"暂无数据\",\r\n      detailVisible: false,\r\n      detail: {},\r\n\r\n      applyFormVisible: false,\r\n      applyCert: {},\r\n\r\n      applyRules: {\r\n        uid: [{ required: true, trigger: \"blur\", message: \"UID 不能为空\" }],\r\n        attribute: [{ required: true, trigger: \"blur\", message: \"标签不能为空\" }],\r\n      },\r\n\r\n      searchInput: \"\",\r\n      applyRes: false,\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.emptyText = \"正在加载...\";\r\n    certApi\r\n      .list()\r\n      .then((res) => {\r\n        this.certificates = res.map((item) => {\r\n          item = JSON.parse(item)\r\n          item.certificate[\"absSignature\"] = item.absSignature;\r\n          return item.certificate;\r\n        });\r\n        this.emptyText = \"暂无证书\";\r\n      })\r\n      .catch(console.log);\r\n  },\r\n\r\n  methods: {\r\n    detailInfo(cert) {\r\n      this.detailVisible = true;\r\n      this.detail = cert;\r\n    },\r\n\r\n    revoke(scope) {\r\n      const no = scope.row.serialNumber;\r\n      certApi\r\n        .revoke({ no })\r\n        .then((res) => {\r\n          if (res === \"OK.\") {\r\n            this.$message({\r\n              message: \"撤销成功\",\r\n              duration: 2 * 1000,\r\n              type: \"success\",\r\n            });\r\n            this.certificates.splice(scope.$index, 1);\r\n          } else {\r\n            this.$message({\r\n              message: res,\r\n              type: \"error\",\r\n            });\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          this.$message({\r\n            message: e.message,\r\n            type: \"error\",\r\n          });\r\n        });\r\n    },\r\n\r\n    applyForCert() {\r\n      this.$refs.applyForm.validate((valid) => {\r\n        if (!valid) return;\r\n        const { uid, attribute } = this.applyCert;\r\n        this.applyRes = false;\r\n\r\n        certApi\r\n          .apply(uid, attribute)\r\n          .then((item) => {\r\n            item.certificate[\"absSignature\"] = item.absSignature;\r\n            this.applyRes = item.certificate;\r\n            this.$message({\r\n              message: \"申请成功\",\r\n              duration: 2 * 1000,\r\n              type: \"success\",\r\n            });\r\n          })\r\n          .catch((e) => {\r\n            this.$message({\r\n              message: e.message,\r\n              type: \"error\",\r\n            });\r\n          });\r\n      });\r\n    },\r\n\r\n    searchCert() {\r\n      const a = this.searchInput;\r\n      if (a) {\r\n        certApi\r\n          .certInfo(a)\r\n          .then((item) => {\r\n            item.certificate[\"absSignature\"] = item.absSignature;\r\n            this.certificates = [item.certificate];\r\n          })\r\n          .catch((e) => {\r\n            this.$message({\r\n              message: e.message,\r\n              type: \"error\",\r\n            });\r\n          });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.content {\r\n  padding: 16px;\r\n  background-color: var(--bg-color-0, white);\r\n}\r\n\r\n.wer {\r\n  display: flex;\r\n  gap: 16px;\r\n  padding: 8px 0;\r\n}\r\n\r\n.wer-left {\r\n  flex: 1;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/.pnpm/registry.nlark.com+thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/registry.npmmirror.com+babel-loader@8.2.3_c5cihxqta4yrmitykip7so3rqm/node_modules/babel-loader/lib/index.js!../../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/index.js??vue-loader-options!./_List.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/.pnpm/registry.nlark.com+thread-loader@2.1.3_webpack@4.46.0/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/registry.npmmirror.com+babel-loader@8.2.3_c5cihxqta4yrmitykip7so3rqm/node_modules/babel-loader/lib/index.js!../../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/index.js??vue-loader-options!./_List.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./_List.vue?vue&type=template&id=48a73b44&scoped=true&\"\nimport script from \"./_List.vue?vue&type=script&lang=js&\"\nexport * from \"./_List.vue?vue&type=script&lang=js&\"\nimport style0 from \"./_List.vue?vue&type=style&index=0&id=48a73b44&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"48a73b44\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/.pnpm/registry.npmmirror.com+mini-css-extract-plugin@0.9.0_webpack@4.46.0/node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/.pnpm/registry.npmmirror.com+css-loader@3.6.0_webpack@4.46.0/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/.pnpm/registry.npmmirror.com+postcss-loader@3.0.0/node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/.pnpm/registry.npmmirror.com+cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@15.9.8_m6jvttnwtqqy6l4pi5vsxiehsy/node_modules/vue-loader/lib/index.js??vue-loader-options!./_List.vue?vue&type=style&index=0&id=48a73b44&scoped=true&lang=css&\"","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\n\nvar TypeError = global.TypeError;\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toIntegerOrInfinity(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n"],"sourceRoot":""}